<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GitHub README loader</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2em;
      background: #222;
      color: #f2f2f2;
      transition: background 0.3s, color 0.3s;
    }

    body.light-mode {
      background: #f9f9f9;
      color: #121212;
    }

    input, button {
      margin-top: 0.5em;
      padding: 0.5em;
      border-radius: 5px;
      border: 1px solid #333;
      width: 100%;
      box-sizing: border-box;
      background: #1e1e1e;
      color: #a5ff90;
    }

    body.light-mode input,
    body.light-mode button {
      background: #ffffff;
      color: #333;
      border: 1px solid #aaa;
    }

    #controls {
      max-width: 600px;
      margin-bottom: 2em;
    }

    #preview {
      background: #1a1a1a;
      color: #f2f2f2;
      padding: 2em;
      border-radius: 12px;
      border: 2px solid #444;
      max-width: 800px;
      margin-top: 2em;
      overflow-x: auto;
      transition: background 0.3s, color 0.3s;
    }

    body.light-mode #preview {
      background: #ffffff;
      color: #000000;
      border: 1px solid #ccc;
    }

    pre {
      background: inherit;
      padding: 1em;
      border-radius: 8px;
      overflow-x: auto;
    }

    code {
      font-family: monospace;
    }

    #mode-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    font-size: 1.5em;
    padding: 0.2em 0.4em;
    border-radius: 6px;
    cursor: pointer;
    background-color: #1e1e1e;
    border: 1px solid #444;
    width: auto;
    height: auto;
    line-height: 1;
  }

  body.light-mode #mode-toggle {
    background-color: #f0f0f0;
    color: #333;
    border: 1px solid #ccc;
  }
  </style>

  <!-- Marked.js -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- Highlight.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>

  <!-- Light/Dark Mode Toggle -->
  <button id="mode-toggle" style="max-width: 20;">üåô</button><br><br><br>

  <div id="controls">
    <label>GitHub Username:</label>
    <input type="text" id="username" placeholder="e.g. octocat" />
    <br><br>
    <label>GitHub Repository:</label>
    <input type="text" id="repo" placeholder="e.g. Hello-World" />

    <button id="load-btn" style="background-color: #0c0; color: #000; font-family: monospace, monospace; cursor: pointer;">Load Markdown</button>
  </div>

  <div id="preview">Markdown preview will appear here...</div>

  <script>
    const usernameInput = document.getElementById('username');
    const repoInput = document.getElementById('repo');
    const loadBtn = document.getElementById('load-btn');
    const preview = document.getElementById('preview');
    const modeToggle = document.getElementById('mode-toggle');

    // Toggle Light/Dark Mode
    modeToggle.addEventListener('click', () => {
      document.body.classList.toggle('light-mode');
      const isLight = document.body.classList.contains('light-mode');
      modeToggle.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
    });

    // Configure Marked
    function configureMarked() {
      marked.setOptions({
        gfm: true,
        breaks: true, // Single \n becomes <br> in GFM
        highlight: function(code, lang) {
          if (hljs.getLanguage(lang)) {
            return hljs.highlight(code, { language: lang }).value;
          }
          return hljs.highlightAuto(code).value;
        }
      });
    }

    async function fetchAndRenderMarkdown(url) {
      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('Failed to fetch Markdown file');
        const markdown = await response.text();

        configureMarked(); // Apply current options
        const html = marked.parse(markdown);
        preview.innerHTML = html;
        hljs.highlightAll();
      } catch (err) {
        preview.innerHTML = `<p style="color: red;">Error: ${err.message}</p>`;
      }
    }

    loadBtn.addEventListener('click', () => {
      const username = usernameInput.value.trim();
      const repo = repoInput.value.trim();

      if (!username || !repo) {
        preview.innerHTML = '<p style="color: red;">Please enter both username and repository name.</p>';
        return;
      }

      const url = `https://raw.githubusercontent.com/${username}/${repo}/main/README.md`;
      fetchAndRenderMarkdown(url);
    });
  </script><br>
  <p style="color: #888; font-size: 0.7em;">This website uses GitHub flavored markdown (GFM) and takes the code from the <strong>main</strong> branch of your selected repository.</p>
</body>
</html>
